
<http://localhost:10214/container/persistedComponentContainer/441af59d-5968-44ea-9e57-a6005be00295/context> {
  _:genid-d289c20f3fc644c8a99e71c4f3201fad-g8zudb <http://www.researchspace.org/ontologies/persist/componentContext/templateProps>
      _:genid-d289c20f3fc644c8a99e71c4f3201fad-4glecx;
    <http://www.researchspace.org/ontologies/persist/componentContext/semanticContext>
      _:genid-d289c20f3fc644c8a99e71c4f3201fad-d7kfuj .
  
  _:genid-d289c20f3fc644c8a99e71c4f3201fad-2myr35 <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/options/showCurrentTime>
      "true";
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/options/height>
      "500px" .
  
  _:genid-d289c20f3fc644c8a99e71c4f3201fad-1p45d <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/id>
      "search-result-timeline";
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/options>
      _:genid-d289c20f3fc644c8a99e71c4f3201fad-2myr35;
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/defaultItemOptions>
      _:genid-d289c20f3fc644c8a99e71c4f3201fad-wx41i;
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/query>
      """PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>
PREFIX Platform: <http://www.researchspace.org/resource/system/>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
SELECT DISTINCT ?item ?timespan ?start ?end ?birthTimespan ?deathTimespan WHERE {
  ?subject rdf:type crm:E21_Person.
  BIND(?subject AS ?item)
  MINUS {
    ?subject (crm:P71i_is_listed_in|skos:inScheme) ?systemAuthorityDoc.
    ?systemAuthorityDoc crm:P2_has_type Platform:System_Resource.
  }
  {
    ?item rdf:type ?ontologyClass.
    ?ontologyClass (rdfs:subClassOf*) crm:E2_Temporal_Entity.
    ?item crm:P4_has_time-span ?__value__.
    ?__value__ (crm:P82a_begin_of_the_begin|crm:P82b_end_of_the_end|crm:P82_at_some_time_within) ?timespanDate.
    OPTIONAL { ?__value__ crm:P82a_begin_of_the_begin ?timespanStart. }
    OPTIONAL { ?__value__ crm:P82b_end_of_the_end ?timespanEnd. }
    OPTIONAL { ?__value__ crm:P82_at_some_time_within ?date. }
    BIND(IF(BOUND(?timespanEnd), ?timespanEnd, ?date) AS ?end)
    BIND(COALESCE(?timespanStart, ?date, ?end) AS ?start)
    BIND(?__value__ AS ?timespan)
    OPTIONAL { FILTER(?__contextRelationPattern__) }
  }
  UNION
  {
    ?item rdf:type crm:E21_Person;
      (crm:P98i_was_born|crm:P100i_died_in) ?activity.
    ?activity crm:P4_has_time-span ?activityTimespan.
    ?activityTimespan (crm:P82_at_some_time_within|crm:P82a_begin_of_the_begin|crm:P82b_end_of_the_end) ?activityTimespanDate.
    OPTIONAL {
      ?item crm:P98i_was_born ?birth.
      ?birth crm:P4_has_time-span ?birthTimespan.
      ?birthTimespan (crm:P82_at_some_time_within|crm:P82a_begin_of_the_begin|crm:P82b_end_of_the_end) ?birthTimespanDate.
      OPTIONAL { ?birthTimespan crm:P82a_begin_of_the_begin ?birthStart. }
      OPTIONAL { ?birthTimespan crm:P82b_end_of_the_end ?birthEnd. }
      OPTIONAL { ?birthTimespan crm:P82_at_some_time_within ?birthDate. }
      BIND(COALESCE(?birthDate, ?birthStart, ?birthEnd) AS ?existingStart)
    }
    OPTIONAL {
      ?item crm:P100i_died_in ?death.
      ?death crm:P4_has_time-span ?deathTimespan.
      ?deathTimespan (crm:P82_at_some_time_within|crm:P82a_begin_of_the_begin|crm:P82b_end_of_the_end) ?deathTimespanDate.
      OPTIONAL { ?deathTimespan crm:P82a_begin_of_the_begin ?deathStart. }
      OPTIONAL { ?deathTimespan <http://www.cidoc-crm.org/cidoc-crm/crm:P82b_end_of_the_end> ?deathEnd. }
      OPTIONAL { ?deathTimespan crm:P82_at_some_time_within ?deathDate. }
      BIND(COALESCE(?deathDate, ?deathStart, ?deathEnd) AS ?end)
    }
    BIND(COALESCE(?existingStart, ?end) AS ?start)
    OPTIONAL { FILTER(?__contextRelationPattern__) }
  }
}
ORDER BY (?start) (?end)
LIMIT 100""";
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/groups>
      <http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>;
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/noResultTemplate>
      "{{#expose 5022}}{{> noResults}}{{/expose}}";
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/tupleTemplate>
      "{{#expose 5021}}{{> timelineItem}}{{/expose}}";
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/tupleTemplateHeight>
      "auto";
    <http://www.researchspace.org/ontologies/persist/components/semantic-timeline/loadingTemplate>
      "<span>Please wait, loading ....</span>" .
  
  _:genid-d289c20f3fc644c8a99e71c4f3201fad-d7kfuj <http://www.researchspace.org/ontologies/persist/componentContext/semanticContext/repository>
      "default";
    <http://www.researchspace.org/ontologies/persist/componentContext/semanticContext/isDefault>
      true .
  
  <http://localhost:10214/container/persistedComponentContainer/441af59d-5968-44ea-9e57-a6005be00295>
    a <http://www.researchspace.org/ontologies/persist/PersistedComponent>, <http://www.ics.forth.gr/isl/CRMdig/D1_Digital_Object>,
      <http://www.w3.org/ns/prov#Entity>, <http://www.w3.org/ns/ldp#Resource>;
    <http://www.cidoc-crm.org/cidoc-crm/P190_has_symbolic_content> "Seventeenth Century Contemporaries";
    <http://www.researchspace.org/ontologies/persist/componentProps> _:genid-d289c20f3fc644c8a99e71c4f3201fad-1p45d;
    <http://www.researchspace.org/ontologies/persist/componentContext> _:genid-d289c20f3fc644c8a99e71c4f3201fad-g8zudb;
    <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <http://www.researchspace.org/resource/system/vocab/resource_type/semantic_timeline>;
    <http://www.researchspace.org/ontologies/persist/componentType> <http://www.researchspace.org/ontologies/persist/components/semantic-timeline>;
    <http://www.w3.org/ns/prov#wasAttributedTo> <http://www.researchspace.org/resource/user/admin>;
    <http://www.w3.org/ns/prov#generatedAtTime> "2024-11-26T12:23:40.397Z"^^<http://www.w3.org/2001/XMLSchema#dateTime> .
  
  _:genid-d289c20f3fc644c8a99e71c4f3201fad-fc0mgf <http://www.researchspace.org/ontologies/persist/componentContext/templateProps/partials/timelineItem>
      """{{#expose 5023}}
                                        <div style=\"display:flex;\">
                                          <div style=\"display:flex; gap: 12px; flex: 1;\">
                                            <div>
                                              <mp-resource-thumbnail iri=\"{{item.value}}\" style=\"width: 55px; height: 55px; object-fit:cover; margin-top: 5px;\">
                                                <mp-resource-thumbnail-fallback>
                                                  <span></span>
                                                </mp-resource-thumbnail-fallback>
                                              </mp-resource-thumbnail>
                                            </div>
                                            <div style=\"display:flex; flex-direction:column;align-items: flex-start; gap: 2px;\">
                                              <semantic-link iri=\"http://www.researchspace.org/resource/ThinkingFrames\" urlqueryparam-view=\"resource-editor\" urlqueryparam-resource-iri=\"{{item.value}}\">
                                                <mp-label iri=\"{{item.value}}\" class=\"text-link-action text-truncate-line1\"></mp-label>
                                              </semantic-link>
                                              {{#if timespan}}
                                                {{#if start.value}}<div>Start date: {{start.value}}</div>{{/if}}
                                                {{#if end.value}}<div>End date: {{end.value}}</div>{{/if}}
                                                <div style=\"display: flex; gap: 3px;\">
                                                  <span>View date:</span>
                                                  <semantic-link iri=\"http://www.researchspace.org/resource/ThinkingFrames\" urlqueryparam-view=\"resource-editor\" urlqueryparam-resource-iri=\"{{timespan.value}}\">
                                                      <span><mp-label iri=\"{{timespan.value}}\" class=\"text-link text-truncate-line1\"></mp-label></span>
                                                  </semantic-link>
                                                </div> 
                                              {{/if}}
                                              {{#if birthTimespan}}
                                                <div style=\"display: flex; gap: 3px;\">
                                                  <div>Birth date: </div>
                                                  {{#if start}}
                                                    <semantic-link iri=\"http://www.researchspace.org/resource/ThinkingFrames\" urlqueryparam-view=\"resource-editor\" urlqueryparam-resource-iri=\"{{birthTimespan.value}}\" class=\"text-link-action text-truncate-line1\">
                                                        {{start.value}}
                                                    </semantic-link>
                                                  {{else}}
                                                    <div>missing birth timespan - date value</div>
                                                  {{/if}}
                                                </div> 
                                              {{/if}}
                                              {{#if deathTimespan}}
                                                <div style=\"display: flex; gap: 3px;\">
                                                  <div>Death date: </div>
                                                  {{#if end}}
                                                    <semantic-link iri=\"http://www.researchspace.org/resource/ThinkingFrames\" urlqueryparam-view=\"resource-editor\" urlqueryparam-resource-iri=\"{{deathTimespan.value}}\" class=\"text-link-action text-truncate-line1\">
                                                        {{end.value}}
                                                    </semantic-link>
                                                  {{else}}
                                                    <div>missing death timespan - date value</div>
                                                  {{/if}}
                                                </div> 
                                              {{/if}}
                                            </div>
                                          </div>
                                          <div style=\"display:flex; gap: 3px;\">
                                            <mp-copy-to-default-set id=\"frame671-copy-to-clipboard\" resource=\"{{item.value}}\">
                                              <button class=\"btn btn-default\" style=\"height: 35px;\">
                                                <rs-icon icon-type=\"rounded\" icon-name=\"inventory\" symbol=\"true\" title=\"Copy to clipboard\"></rs-icon>
                                              </button>
                                            </mp-copy-to-default-set>
                                            
                                            <mp-overlay-dialog id=\"{{item.value}}-resource-preview-dialog\" type=\"modal\" class=\"modal-xlSize preview_modal\" title=\"Preview\">
                                              <mp-overlay-dialog-trigger>
                                                <button class=\"btn btn-default\" style=\"height: 35px;\">
                                                  <rs-icon icon-type=\"rounded\" icon-name=\"fullscreen\" symbol=\"true\" title=\"Preview\"></rs-icon>
                                                </button>
                                              </mp-overlay-dialog-trigger>

                                              <mp-overlay-dialog-content>
                                                <inline-template template-iri=\"http://www.researchspace.org/resource/ResourcePreview\" options='{  \"resource\": \"{{item.value}}\", 
                                                                              \"resourceConfig\": \"http://www.researchspace.org/resource/system/resource_configurations_container/data/Person\", 
                                                                              \"resourceConfigLabel\": \"Person\",
                                                                              \"resourceOntologyClass\": \"<http://www.cidoc-crm.org/cidoc-crm/E21_Person>\",
                                                                              \"resourceDetailSection\": true
                                                                            }'>
                                                </inline-template> 
                                              </mp-overlay-dialog-content>
                                            </mp-overlay-dialog>
                                          </div>
                                        </div>
                                      {{/expose}}""";
    <http://www.researchspace.org/ontologies/persist/componentContext/templateProps/partials/noResults>
      """{{#expose 5024}}
                                        <div style=\"margin-bottom: 20px;\">
                                          <div class=\"documentation-section documentation-section-withIcon\">
                                            <div class=\"documentation-section-icon-container\">
                                              <i class=\"fa fa-info\"></i>
                                            </div>
                          
                                            <div style=\"flex: 1;\"> 
                                              <div class=\"documentation-section-title\">No results available</div>
                                              <div class=\"documentation-section-content\">
                                                To display a resource in the timeline it must have associated a Timespan with date, start date or end date.
                                              </div>
                                            </div>
                                          </div> 
                                        </div>
                                      {{/expose}}""" .
  
  _:genid-d289c20f3fc644c8a99e71c4f3201fad-4glecx <http://www.researchspace.org/ontologies/persist/componentContext/templateProps/partials>
      _:genid-d289c20f3fc644c8a99e71c4f3201fad-fc0mgf .
  
  <http://www.researchspace.org/resource/system/persistedComponentContainer> <http://www.w3.org/ns/ldp#contains>
      <http://localhost:10214/container/persistedComponentContainer/441af59d-5968-44ea-9e57-a6005be00295> .
}
